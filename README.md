# CKA è®¤è¯ä»é›¶åˆ°ä¸€
**ğŸ³ CKA from zero to hero - 2020/05**

---

## æŠ¥è€ƒç†ç”±
- æŒè¯å¯ä»¥å¾€**å®¹å™¨è¿ç»´å²—ä½**æ–¹å‘è½¬ï¼Œä»¥å†²å‡»æ›´é«˜çš„å·¥é’±ã€‚åœ¨æ‹›è˜å¹³å°æœç´¢`k8s`ã€`kubernetes`ã€`å®¹å™¨`å³å¯çœ‹åˆ°ç›¸å…³å²—ä½çš„å·¥èµ„æ˜¯ååˆ†å¯è§‚çš„ï¼Œæœ‰ç›¸å½“å¤§ä¸€éƒ¨åˆ†å²—ä½æœˆè–ªæ˜¯åœ¨**20K**ä»¥ä¸Šçš„ã€‚
- è€ƒè¯•è´¹[å›½é™…ç«™](https://training.linuxfoundation.org/april-2020-promo/)è¿‘ä¸¤ä¸ªæœˆå…¨åœº7æŠ˜ï¼Œè€ƒè¯•åªéœ€è¦**210åˆ€**ã€‚å¦‚æœåœ¨[ä¸­å›½åŒº](https://training.linuxfoundation.cn/certificate/details/1)è€ƒï¼Œè¿™å‡ å¤©ä¹Ÿæ˜¯**7æŠ˜~Â¥1466**ï¼Œä¸”ä¸ºä¸­å›½äººç›‘è€ƒã€æ”¯æŒæ”¯ä»˜å®ä»˜æ¬¾å’Œä»¥åŠå¼€å‘ç¥¨ã€‚

## æŠ¥è€ƒææ–™

- å›½é™…ç«™æŠ¥è€ƒè¦æ±‚**æŠ¤ç…§** æˆ–è€… **æ¸¯æ¾³é€šè¡Œè¯** æˆ–è€… **é©¾é©¶è¯ç¿»è¯‘ä»¶(æ”¯ä»˜å®å¯ä»¥å…è´¹ç”³è¯·) + é©¾ç…§åŸä»¶**
- å›½é™…ç«™æŠ¥è€ƒè¦æ±‚**å¤–å¸ä¿¡ç”¨å¡**ï¼Œç”¨äºæŠ¥åè´¹æ”¯ä»˜

## è€ƒè¯•å½¢å¼
### è€ƒè¯•å½¢å¼ä»‹ç»

ğŸ§å†…å®¹æ¥è‡ªç½‘ç»œï¼Œä¸»è¦æ¥æºæœ‰ï¼š

[CKAè€ƒè¯•ç»éªŒï¼šæŠ¥è€ƒå’Œè€ƒçº²](https://blog.csdn.net/fly910905/article/details/102966474)

[2020å¹´CKAè€ƒè¯•æœ€æ–°æœ€å…¨æŒ‡å—](https://zhuanlan.zhihu.com/p/106090560)

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

- 3 ä¸ªå°æ—¶ï¼Œ 24 é“é¢˜ç›®ã€‚éœ€è¦åœ¨å°é—­æ— äººçš„æˆ¿é—´è¿›è¡Œï¼Œè¦æ±‚æ¡Œé¢æ²¡æœ‰å…¶ä»–ä¸œè¥¿ï¼Œå¹¶ä¸”æˆ¿é—´æ²¡æœ‰äººè¿›å‡º
- åœ¨çº¿è€ƒè¯•ï¼Œå›½é™…åŒºéœ€è¦ç½‘ç»œç¯å¢ƒååˆ†ç¨³å®šï¼Œå¹¶ä¸”Socks5ç§‘å­¦å·¥å…·ä¹Ÿéœ€è¦ç¨³å®šï¼Œä¸ç„¶æ–­çº¿äº†çš„è¯ä¼šå¾ˆéº»çƒ¦
- è€ƒè¯•å…¨éƒ¨éƒ½æ˜¯å®é™…æ“ä½œé¢˜ï¼Œä¼šç»™å‡ºå¤šä¸ª kubernetes é›†ç¾¤ï¼Œè¦æ±‚ä½ å®ŒæˆæŒ‡å®šçš„æ“ä½œ
- è€ƒè¯•é¢˜ç›®çš„åˆ†æ•°æŒ‰ç…§æ“ä½œçš„éš¾åº¦å˜åŒ–ï¼Œ 1~8 åˆ†ä¸ç­‰
- å¼€å§‹éœ€è¦å‡ºç¤ºæœ‰è‹±æ–‡åå­—çš„å®˜æ–¹è¯ä»¶ï¼Œä¸€èˆ¬æŠ¤ç…§æœ€å¥½ã€‚å¦‚æœæ²¡æœ‰æŠ¤ç…§å¯ä»¥ä½¿ç”¨é©¾ç…§ç¿»è¯‘ä»¶ç­‰å…¶ä»–è¯æ˜çš„æ–¹å¼
- è€ƒè¯•ä¸­æ˜¯å¯ä»¥æŸ¥é˜… kubernestes.io çš„å®˜ç½‘çš„ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨äº‹å…ˆå®šä¹‰å¥½çš„ä¹¦ç­¾ï¼Œæ¥å¿«é€ŸæŸ¥æ‰¾åˆ°è‡ªå·±ä¹‹å‰æŸ¥çœ‹è¿‡å¾—å†…å®¹
- è€ƒè¯•é¢˜ç›®æ™®éä¸éš¾ï¼Œä½†æ˜¯ç»†èŠ‚ä¸Šæ‰¹æ”¹åœ°éå¸¸ä¸¥æ ¼ï¼Œéœ€è¦åšé¢˜æ—¶ä»”ç»†é˜…è¯»é¢˜å¹²

### è€ƒè¯•ç•Œé¢ä»‹ç»
å…·ä½“ç•Œé¢å¦‚ä¸‹ï¼š
![Imgur](https://i.imgur.com/iUOTBmr.png)

- åœ¨è€ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€‰æ‹©å…·ä½“çš„è¯­è¨€ï¼Œå¯ä»¥æ˜¯ä¸­æ–‡ã€‚ä½†æ˜¯ä¸­æ–‡ç¿»è¯‘æœ‰æ—¶ä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œå› æ­¤éœ€è¦å¯¹ç…§è¿›è¡Œ
- åœ¨è€ƒè¯•è¿‡ç¨‹ä¸­ï¼Œè€ƒå®˜éœ€è¦ä½ è¿›è¡Œå…±äº«å±å¹•å’Œå…±äº«æ‘„åƒå¤´ï¼Œå¹¶ä¸”æ‘„åƒå¤´éœ€è¦å®Œæ•´åœ°èƒ½å¤Ÿçœ‹åˆ°ä½ çš„è„¸çš„
- å…¶ä»–å·¥å…·ä¸­æœ‰è®°äº‹æœ¬å¯ä»¥è®°å½•è¿‡ç¨‹ä¸­çš„é—®é¢˜ï¼Œå¯ä»¥å°†æœ‰é—®é¢˜çš„é¢˜ç›®å…ˆè®°å½•è¿›è¡Œç„¶åå†è¿›è¡Œä¿®æ”¹

### é›†ç¾¤çš„åˆ‡æ¢
åœ¨ CKA è€ƒè¯•ä¸­ï¼Œé›†ç¾¤çš„åˆ‡æ¢æ—¶é€šè¿‡è·³æ¿æœºä¸­çš„å‚æ•°æ¥å†³å®šçš„ã€‚åœ¨å…·ä½“æ“ä½œæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®é¢˜ç›®æç¤ºæ“ä½œå³å¯ï¼š
- è€ƒè¯•é¢˜å¹²ä¼šç»™å‡ºéå¸¸è¯¦å°½çš„æç¤ºï¼Œä¸ä¼šè®©ä½ å› ä¸ºæ–‡ä»¶ä¿å­˜é”™ä½ç½®ã€è·³æ¿æœºç™»é™†é”™è¯¯ç­‰ä½çº§é”™è¯¯æ‰£åˆ†
- è€ƒè¯•é¢˜å¹²é‡Œå…¨éƒ¨çš„å˜é‡ä¾‹å¦‚ `kucc04` éƒ½æ˜¯å¯ä»¥ä¸€é”®å¤åˆ¶çš„
- æ’é”™é¢˜éœ€è¦ä½¿ç”¨ `ssh node01`è¿›å…¥èŠ‚ç‚¹
- æ’é”™é¢˜éœ€è¦ä½¿ç”¨ `sudo -i` æ¥è·å– root æƒé™

## å¦‚ä½•å­¦ä¹ 
- å­¦ä¹ dockerçš„åŸºç¡€çŸ¥è¯†
- å­¦ä¹ kubernetesçš„åŸºç¡€çŸ¥è¯†
- é’ˆå¯¹ckaè®¤è¯å­¦ä¹ ç›¸å…³çš„çœŸé¢˜

## å¥‡æŠ€æ·«å·§
å‚æ•°åˆ‡å¿Œæ­»è®°ç¡¬èƒŒï¼Œå‘½ä»¤ååŠ `-h`å°±æœ‰äº†ã€‚è€Œä¸”ä¸€å®šè¦ç†è§£æ¯ä¸ªå‚æ•°çš„å«ä¹‰ã€‚ä¾‹å¦‚å¸¸è§çš„ `-o`ï¼Œæˆ‘ä»¬è¦çŸ¥é“ï¼š

```
#-oå‚æ•°ï¼ŒæŒ‡å®šç”Ÿæˆyamlæˆ–è€…jsonæ ¼å¼çš„æè¿°æ–‡ä»¶

[(-o|--output=)json|yaml|wide|custom-columns=...|custom-columns-file=...|go-template=...|go-template-file=...|jsonpath=...|jsonpath-file=...]

-o yaml 
-o json
--output=yaml
--output=json

```

è€ƒè¯•ç•Œé¢è‡ªå¸¦çš„è®°äº‹æœ¬éå¸¸å¥½ç”¨ï¼Œä¿®æ”¹èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ç›´æ¥ä»å®˜æ–¹æ–‡æ¡£æ‹·è´éœ€è¦çš„yamlç‰‡æ®µï¼Œåœ¨è®°äº‹æœ¬é‡ŒåŠ ä»¥ä¿®æ”¹å³å¯ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©é€‰å¤åˆ¶åˆ°æ–‡ä»¶ä¸­ï¼Œç„¶åç”¨viç¼–è¾‘å™¨ä¿®æ”¹ã€‚æ•´ä¸ªè€ƒè¯•è™½ç„¶ç»™äº†3å°æ—¶æ—¶é—´ï¼Œä½†æ˜¯å…¶å®å¤§æ¦‚`1.5h`å°±èƒ½å¤ŸåŸºæœ¬æå®šã€‚

ä¾‹å¦‚è¿™ä¸€é“daemonsetçœŸé¢˜ã€‚

> daemonsetç®€å•ç†è§£å°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªå…è®¸ä¸€ä¸ªå‰¯æœ¬ï¼›å†ç®€å•ç‚¹ï¼Œå·¥åœ°æ¯ä¸€ç‰‡åŒºåŸŸé‡Œåªå…è®¸æ”¾1é—´è±ªåæ¿æˆ¿ã€‚

```
Set configuration context $ kubectl config use-context k8s

Ensure a single instance of Pod nginx is running on each node of the kubernetes cluster where nginx also represents the image name which has to be used. Do no override any taints currently in place.

Use Daemonsets to complete this task and use ds.kusc00201 as Daemonset name. Question weight 3%

```
```
å…ˆç²˜è´´ï¼Œåç”¨VIç¼–è¾‘ï¼š
(1)åªéœ€è¦æ‰“å¼€å®˜æ–¹daemonsetæ–‡æ¡£ï¼Œæ‰¾åˆ°yamlç‰‡æ®µï¼šhttps://kubernetes.io/docs/concepts/workloads/controllers/daemonset/
(2)å¤åˆ¶åï¼Œåœ¨viç”¨/g/fluentd-elasticsearch/s//nginx/gæ‰¹é‡æ›¿æ¢
(3)åˆ é™¤labelsæ®µã€ä¿®æ”¹nameå³å¯ã€‚ã€‚
```

åˆæ¯”å¦‚è¿™é“çœŸé¢˜ï¼Œéœ€è¦æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªdeploymentçš„yamlæ–‡ä»¶ï¼Œè¦æ±‚ç”Ÿæˆåæ¸…ç†æ‰å‘½ä»¤äº§ç”Ÿçš„å¯¹è±¡ï¼Œåˆ™æˆ‘ä»¬ç”¨`--dry-run`è¿™ä¸ªå‚æ•°å³å¯"æ¨¡æ‹Ÿè¿è¡Œ"ã€‚

```
Set configuration context $ kubectl config use-context k8s Create a deployment spec file that will:
ï¬Launch 7 replicas of the redis image with the label: app_env_stage=dev

ï¬Deployment name: kual00201

Save a copy of this spec file to /opt/KUAL00201/deploy_spec.yaml (or .json)

When you are done, clean up (delete) any new k8s API objects that you produced during this task Question weight: 3%
```

```
# ä¸€æ¡æå®š
kubectl run kual00201 --generator=deployment/apps.v1 --image=redis --labels=app_env_stage=dev --replicas=7 -o yaml --dry-run > /opt/KUAL00201/deploy_spec.yaml
```


## åœ¨çº¿ç»ƒä¹ 

[kodekloudå…ç™»é™†è”ç³»-ä¼ é€é—¨](https://kodekloud.com/courses/certified-kubernetes-administrator-with-practice-tests/lectures/9816528)
